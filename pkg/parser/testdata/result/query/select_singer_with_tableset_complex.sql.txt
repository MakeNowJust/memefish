--- select_singer_with_tableset_complex.sql
SELECT * FROM Singers
UNION ALL
(
  SELECT * FROM Singers
  UNION DISTINCT
  (
    SELECT * FROM Singers
    INTERSECT ALL
    (
      SELECT * FROM Singers
      INTERSECT DISTINCT
      (
        SELECT * FROM Singers
        EXCEPT ALL
        (
          SELECT * FROM Singers
          EXCEPT DISTINCT
          SELECT * FROM Singers
        )
      )
    )
  )
)

--- AST
&parser.QueryStatement{
  Hint: (*parser.Hint)(nil),
  Expr: &parser.CompoundQuery{
    end:      368,
    Op:       "UNION",
    Distinct: false,
    List:     []parser.QueryExpr{
      &parser.Select{
        pos:      0,
        end:      21,
        Distinct: false,
        AsStruct: false,
        List:     parser.SelectExprList{
          &parser.SelectExpr{
            pos:  7,
            end:  8,
            Expr: nil,
            Star: true,
            As:   (*parser.Ident)(nil),
          },
        },
        From: parser.FromItemList{
          &parser.FromItem{
            end:  21,
            Expr: &parser.TableName{
              end:   21,
              Ident: &parser.Ident{
                pos:  14,
                end:  21,
                Name: "Singers",
              },
              Hint: (*parser.Hint)(nil),
              As:   (*parser.Ident)(nil),
            },
            Method: "",
            Num:    nil,
            Rows:   false,
          },
        },
        Where:   nil,
        GroupBy: parser.ExprList{},
        Having:  nil,
        OrderBy: parser.OrderExprList{},
        Limit:   (*parser.Limit)(nil),
      },
      &parser.SubQueryExpr{
        end:  368,
        Expr: &parser.SubQuery{
          pos:  32,
          end:  368,
          Expr: &parser.CompoundQuery{
            end:      366,
            Op:       "UNION",
            Distinct: true,
            List:     []parser.QueryExpr{
              &parser.Select{
                pos:      36,
                end:      57,
                Distinct: false,
                AsStruct: false,
                List:     parser.SelectExprList{
                  &parser.SelectExpr{
                    pos:  43,
                    end:  44,
                    Expr: nil,
                    Star: true,
                    As:   (*parser.Ident)(nil),
                  },
                },
                From: parser.FromItemList{
                  &parser.FromItem{
                    end:  57,
                    Expr: &parser.TableName{
                      end:   57,
                      Ident: &parser.Ident{
                        pos:  50,
                        end:  57,
                        Name: "Singers",
                      },
                      Hint: (*parser.Hint)(nil),
                      As:   (*parser.Ident)(nil),
                    },
                    Method: "",
                    Num:    nil,
                    Rows:   false,
                  },
                },
                Where:   nil,
                GroupBy: parser.ExprList{},
                Having:  nil,
                OrderBy: parser.OrderExprList{},
                Limit:   (*parser.Limit)(nil),
              },
              &parser.SubQueryExpr{
                end:  366,
                Expr: &parser.SubQuery{
                  pos:  77,
                  end:  366,
                  Expr: &parser.CompoundQuery{
                    end:      362,
                    Op:       "INTERSECT",
                    Distinct: false,
                    List:     []parser.QueryExpr{
                      &parser.Select{
                        pos:      83,
                        end:      104,
                        Distinct: false,
                        AsStruct: false,
                        List:     parser.SelectExprList{
                          &parser.SelectExpr{
                            pos:  90,
                            end:  91,
                            Expr: nil,
                            Star: true,
                            As:   (*parser.Ident)(nil),
                          },
                        },
                        From: parser.FromItemList{
                          &parser.FromItem{
                            end:  104,
                            Expr: &parser.TableName{
                              end:   104,
                              Ident: &parser.Ident{
                                pos:  97,
                                end:  104,
                                Name: "Singers",
                              },
                              Hint: (*parser.Hint)(nil),
                              As:   (*parser.Ident)(nil),
                            },
                            Method: "",
                            Num:    nil,
                            Rows:   false,
                          },
                        },
                        Where:   nil,
                        GroupBy: parser.ExprList{},
                        Having:  nil,
                        OrderBy: parser.OrderExprList{},
                        Limit:   (*parser.Limit)(nil),
                      },
                      &parser.SubQueryExpr{
                        end:  362,
                        Expr: &parser.SubQuery{
                          pos:  127,
                          end:  362,
                          Expr: &parser.CompoundQuery{
                            end:      356,
                            Op:       "INTERSECT",
                            Distinct: true,
                            List:     []parser.QueryExpr{
                              &parser.Select{
                                pos:      135,
                                end:      156,
                                Distinct: false,
                                AsStruct: false,
                                List:     parser.SelectExprList{
                                  &parser.SelectExpr{
                                    pos:  142,
                                    end:  143,
                                    Expr: nil,
                                    Star: true,
                                    As:   (*parser.Ident)(nil),
                                  },
                                },
                                From: parser.FromItemList{
                                  &parser.FromItem{
                                    end:  156,
                                    Expr: &parser.TableName{
                                      end:   156,
                                      Ident: &parser.Ident{
                                        pos:  149,
                                        end:  156,
                                        Name: "Singers",
                                      },
                                      Hint: (*parser.Hint)(nil),
                                      As:   (*parser.Ident)(nil),
                                    },
                                    Method: "",
                                    Num:    nil,
                                    Rows:   false,
                                  },
                                },
                                Where:   nil,
                                GroupBy: parser.ExprList{},
                                Having:  nil,
                                OrderBy: parser.OrderExprList{},
                                Limit:   (*parser.Limit)(nil),
                              },
                              &parser.SubQueryExpr{
                                end:  356,
                                Expr: &parser.SubQuery{
                                  pos:  188,
                                  end:  356,
                                  Expr: &parser.CompoundQuery{
                                    end:      348,
                                    Op:       "EXCEPT",
                                    Distinct: false,
                                    List:     []parser.QueryExpr{
                                      &parser.Select{
                                        pos:      198,
                                        end:      219,
                                        Distinct: false,
                                        AsStruct: false,
                                        List:     parser.SelectExprList{
                                          &parser.SelectExpr{
                                            pos:  205,
                                            end:  206,
                                            Expr: nil,
                                            Star: true,
                                            As:   (*parser.Ident)(nil),
                                          },
                                        },
                                        From: parser.FromItemList{
                                          &parser.FromItem{
                                            end:  219,
                                            Expr: &parser.TableName{
                                              end:   219,
                                              Ident: &parser.Ident{
                                                pos:  212,
                                                end:  219,
                                                Name: "Singers",
                                              },
                                              Hint: (*parser.Hint)(nil),
                                              As:   (*parser.Ident)(nil),
                                            },
                                            Method: "",
                                            Num:    nil,
                                            Rows:   false,
                                          },
                                        },
                                        Where:   nil,
                                        GroupBy: parser.ExprList{},
                                        Having:  nil,
                                        OrderBy: parser.OrderExprList{},
                                        Limit:   (*parser.Limit)(nil),
                                      },
                                      &parser.SubQueryExpr{
                                        end:  348,
                                        Expr: &parser.SubQuery{
                                          pos:  247,
                                          end:  348,
                                          Expr: &parser.CompoundQuery{
                                            end:      338,
                                            Op:       "EXCEPT",
                                            Distinct: true,
                                            List:     []parser.QueryExpr{
                                              &parser.Select{
                                                pos:      259,
                                                end:      280,
                                                Distinct: false,
                                                AsStruct: false,
                                                List:     parser.SelectExprList{
                                                  &parser.SelectExpr{
                                                    pos:  266,
                                                    end:  267,
                                                    Expr: nil,
                                                    Star: true,
                                                    As:   (*parser.Ident)(nil),
                                                  },
                                                },
                                                From: parser.FromItemList{
                                                  &parser.FromItem{
                                                    end:  280,
                                                    Expr: &parser.TableName{
                                                      end:   280,
                                                      Ident: &parser.Ident{
                                                        pos:  273,
                                                        end:  280,
                                                        Name: "Singers",
                                                      },
                                                      Hint: (*parser.Hint)(nil),
                                                      As:   (*parser.Ident)(nil),
                                                    },
                                                    Method: "",
                                                    Num:    nil,
                                                    Rows:   false,
                                                  },
                                                },
                                                Where:   nil,
                                                GroupBy: parser.ExprList{},
                                                Having:  nil,
                                                OrderBy: parser.OrderExprList{},
                                                Limit:   (*parser.Limit)(nil),
                                              },
                                              &parser.Select{
                                                pos:      317,
                                                end:      338,
                                                Distinct: false,
                                                AsStruct: false,
                                                List:     parser.SelectExprList{
                                                  &parser.SelectExpr{
                                                    pos:  324,
                                                    end:  325,
                                                    Expr: nil,
                                                    Star: true,
                                                    As:   (*parser.Ident)(nil),
                                                  },
                                                },
                                                From: parser.FromItemList{
                                                  &parser.FromItem{
                                                    end:  338,
                                                    Expr: &parser.TableName{
                                                      end:   338,
                                                      Ident: &parser.Ident{
                                                        pos:  331,
                                                        end:  338,
                                                        Name: "Singers",
                                                      },
                                                      Hint: (*parser.Hint)(nil),
                                                      As:   (*parser.Ident)(nil),
                                                    },
                                                    Method: "",
                                                    Num:    nil,
                                                    Rows:   false,
                                                  },
                                                },
                                                Where:   nil,
                                                GroupBy: parser.ExprList{},
                                                Having:  nil,
                                                OrderBy: parser.OrderExprList{},
                                                Limit:   (*parser.Limit)(nil),
                                              },
                                            },
                                            OrderBy: parser.OrderExprList{},
                                            Limit:   (*parser.Limit)(nil),
                                          },
                                        },
                                        OrderBy: parser.OrderExprList{},
                                        Limit:   (*parser.Limit)(nil),
                                      },
                                    },
                                    OrderBy: parser.OrderExprList{},
                                    Limit:   (*parser.Limit)(nil),
                                  },
                                },
                                OrderBy: parser.OrderExprList{},
                                Limit:   (*parser.Limit)(nil),
                              },
                            },
                            OrderBy: parser.OrderExprList{},
                            Limit:   (*parser.Limit)(nil),
                          },
                        },
                        OrderBy: parser.OrderExprList{},
                        Limit:   (*parser.Limit)(nil),
                      },
                    },
                    OrderBy: parser.OrderExprList{},
                    Limit:   (*parser.Limit)(nil),
                  },
                },
                OrderBy: parser.OrderExprList{},
                Limit:   (*parser.Limit)(nil),
              },
            },
            OrderBy: parser.OrderExprList{},
            Limit:   (*parser.Limit)(nil),
          },
        },
        OrderBy: parser.OrderExprList{},
        Limit:   (*parser.Limit)(nil),
      },
    },
    OrderBy: parser.OrderExprList{},
    Limit:   (*parser.Limit)(nil),
  },
}

--- SQL
SELECT * FROM Singers UNION ALL (SELECT * FROM Singers UNION DISTINCT (SELECT * FROM Singers INTERSECT ALL (SELECT * FROM Singers INTERSECT DISTINCT (SELECT * FROM Singers EXCEPT ALL (SELECT * FROM Singers EXCEPT DISTINCT SELECT * FROM Singers)))))
